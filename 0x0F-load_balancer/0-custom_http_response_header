#!/usr/bin/env bash

# Install nginx if not already installed
if [ ! -x /usr/sbin/nginx ]; then
    sudo apt-get update
    sudo apt-get -y install nginx
fi

# Create the directory for the custom header
sudo mkdir -p /etc/nginx/conf.d/

# Create the file for the custom header
sudo tee /etc/nginx/conf.d/custom-header.conf <<EOF
server {
    listen 80 default_server;
    listen [::]:80 default_server;

    # Add custom header
    add_header X-Served-By \$hostname;

    # Rest of server block configuration
    # ...
}
EOF

# Test nginx configuration and restart if successful
sudo nginx -t && sudo systemctl restart nginx

